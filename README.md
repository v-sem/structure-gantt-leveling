# Jira Gantt Leveling Tool

Этот инструмент предназначен для автоматического выравнивания задач в диаграммах Ганта в Jira, распределяя их по временным слотам с учетом параллельной работы над несколькими проектами.

## Основные функции

- Автоматическое вычисление задержек выравнивания для задач в диаграммах Ганта
- Поддержка работы с несколькими параллельными проектами
- Учет рабочих часов согласно календарю проекта
- Интеграция с Jira через REST API

## Требования

- Go 1.24 или выше
- Доступ к Jira с соответствующими правами

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone <репозиторий>
   cd <папка проекта>
   ```

2. Установите зависимости:
   ```bash
   go mod download
   ```

## Конфигурация

Перед использованием необходимо создать файл конфигурации `config.yml`. Пример конфигурации:

```yaml
client:
  url: http://your-jira-instance
  token: your_api_token
  cookies:
    - name: JSESSIONID
      value: your_session_id
  user_name: your_client_name
structures:
  project1:
    id: 123
    jql: project = PRJ1 ORDER BY PlannedEnd, Priority ASC
    parallel_projects: 2
    start_date_id: 20250101
```

## Использование

### Запуск для всех структур из конфигурации
```bash
go run main.go -c config.yml
```

### Запуск для конкретной структуры
```bash
go run main.go -c config.yml -s project1
```

### Параметры командной строки
- `-c` - путь к конфигурационному файлу (по умолчанию `config.yml`)
- `-s` - название секции из `structures` для выполнения (если не указано - выполняются все)

## Логика работы

1. Инструмент получает метаданные диаграммы Ганта, включая календарь рабочего времени
2. Загружает список задач согласно JQL-запросу из конфигурации
3. Для каждой задачи:
    - Определяет соответствующую строку в структуре
    - Получает текущие атрибуты (длительность, даты)
    - Вычисляет оптимальную задержку выравнивания
    - Обновляет задержку в Jira

## Структура проекта

- `config_file.go` - загрузка конфигурации
- `gantt_calendar.go` - работа с календарем Ганта
- `helpers.go` - вспомогательные функции
- `jira_client.go` - клиент для работы с Jira API
- `main.go` - основная логика программы
- `slots.go` - управление временными слотами

## Лицензия

MIT